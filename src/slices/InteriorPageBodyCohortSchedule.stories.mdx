import { Meta, Story, Canvas, Props } from '@storybook/addon-docs/blocks'
import { getGatsbyImageData } from '@imgix/gatsby'
import faker from 'faker'

import * as Storybook from '../components/Storybook'
import { titleize } from '../lib/titleize'

import { InteriorPageBodyCohortSchedule } from './InteriorPageBodyCohortSchedule'

export const descriptionHTML = `
  <p>
    <strong>${titleize(faker.lorem.words(4))}</strong><br/>
    ${titleize(faker.lorem.words(3))}
  </p>
`

export const dateHTML = `
  <p>${titleize(faker.lorem.words(3))}</p>
`

<Meta
  title="Interior Pages/Cohort Schedule"
  component={InteriorPageBodyCohortSchedule}
/>

##### Interior Page

# Cohort Schedule

A table containing the schedule for a cohort. Each row represents an event with
an accompanying date. Events can be grouped and divided with orange dividers.

Content for this slice is managed via Cohort Schedule documents. Use this slice
to display an existing Cohort Schedule document.

#### Slice fields

<Storybook.SliceFieldsTable
  customTypeId="interior_page"
  sliceZoneId="body"
  sliceId="cohort_schedule"
  fieldset="non-repeat"
/>

### Typical usage

In this example, multiple sections are present with various formatting used for
each event.

<Canvas withSource="none">
  <Story name="Typical usage">
    <InteriorPageBodyCohortSchedule nextSharesBg={false}>
      <InteriorPageBodyCohortSchedule.Section
        descriptionHeading={titleize(faker.lorem.words(2))}
        datesHeading={titleize(faker.lorem.words(2))}
      >
        {Array(4)
          .fill()
          .map((_, i) => (
            <InteriorPageBodyCohortSchedule.Event
              descriptionHTML={descriptionHTML}
              dateHTML={dateHTML}
              index={i}
            />
          ))}
      </InteriorPageBodyCohortSchedule.Section>
      <InteriorPageBodyCohortSchedule.Section>
        {Array(3)
          .fill()
          .map((_, i) => (
            <InteriorPageBodyCohortSchedule.Event
              descriptionHTML={descriptionHTML}
              dateHTML={dateHTML}
              index={i}
            />
          ))}
      </InteriorPageBodyCohortSchedule.Section>
    </InteriorPageBodyCohortSchedule>
  </Story>
</Canvas>
